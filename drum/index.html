<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="main.css">
</head>
  <body>
    <header>
      <h1>Drum App</h1>
    </header>
    <div class="container">
      <div class="keys">
        <div data-key="49" class="key">
          <kbd>1</kbd>
          <span class="sound">ahem</span>
        </div>
        <div data-key="50"class="key">
          <kbd>2</kbd>
          <span class="sound">applause</span>
        </div>
        <div data-key="51" class="key">
          <kbd>3</kbd>
          <span class="sound">baby</span>
        </div>
        <div data-key="52" class="key">
          <kbd>4</kbd>
          <span class="sound">bicycke</span>
        </div>
        <div data-key="53" class="key">
          <kbd>5</kbd>
          <span class="sound">bird</span>
        </div>
        <div data-key="54" class="key">
          <kbd>6</kbd>
          <span class="sound">blurp</span>
        </div>
        <div data-key="55" class="key">
          <kbd>7</kbd>
          <span class="sound">boing</span>
        </div>
        <div data-key="56" class="key">
          <kbd>8</kbd>
          <span class="sound">horn</span>
        </div>
        <div data-key="57" class="key">
          <kbd>9</kbd>
          <span class="sound">car</span>
        </div>
      </div>
    </div>


    <audio data-key="49" src="sounds/ahem_x.wav"></audio>
    <audio data-key="50" src="sounds/applause_y.wav"></audio>
    <audio data-key="51" src="sounds/baby_cry.wav"></audio>
    <audio data-key="52" src="sounds/bicycle_bell.wav"></audio>
    <audio data-key="53" src="sounds/bird.wav"></audio>
    <audio data-key="54" src="sounds/blurp_x.wav"></audio>
    <audio data-key="55" src="sounds/boing_x.wav"></audio>
    <audio data-key="56" src="sounds/car_crash2.wav"></audio>
    <audio data-key="57" src="sounds/car_horn_x.wav"></audio>

    <script>
      const playSound = function (e) {
          // console.log("press");
          //console.log(e.keyCode);
          //console.log(e);
          const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
          const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);

          if (!audio) return;
          audio.currenTime = 0; // to rewind to the start
          audio.play();
          key.classList.add('playing');

          console.log(audio);
          console.log(key);
        }

        const removeTransition = function (e) {
          if (e.propertyName !== 'transform') return;
          console.log(e.propertyName);
          this.classList.remove('playing');

        }

        const keys = Array.from(document.querySelectorAll('.key'));
        //console.log(keys);
        keys.forEach(key => key.addEventListener('transitionend', removeTransition));

        window.addEventListener("keydown", playSound);
    </script>
  </body>
</html>